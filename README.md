# Мовшин Максим Антонович | БПИ213 | ИДЗ-2 | Вариант 12
## Условие задачи
В гостинице 30 номеров, клиенты гостиницы снимают номер на одни или несколько суток. Если в гостинице нет свободных номеров, клиенты не уходят, а устраиваются рядом с гостиницей на скамейках и ждут, пока любой номеров не освободится. Создать приложение, моделирующее работу гостиницы. Каждого клиента реализовать в виде отдельного процесса.
## Решение
В программе фигурируют процессы двух типов - процесс типа менеджера и процессы типа посетителя.
Разделяемая память отображает в сюжете отчетную книгу менеджера, в которой записано, какие комнаты заняты, и сколько комнат занято.
Семафор отображает в сюжете ресепшн - только один посетитель может подойти к ресепшну и произвести действия с отчетной книгой - проверить наличие пустого номера, снять номер или выписаться из номера.
Алгоритм посетителей выглядит следующим образом.
1. Встать в очередь на ресепшне и ждать, пока не дойдет очередь
2. Узнать, есть ли свободный номер.
 - Если нет - уйти с ресепшна и пойти поспать на лавочке пару дней, а затем вернуться к пункту 1.
 - Если есть - отметить его как занятый в отчетной книге, уйти с ресепшна и пойти поспать в номере.
3. Встать в очередь на ресепшне и ждать, пока не дойдет очередь
4. Выписаться из номера (отметить это в отчетной книге) и уйти.
### замечания
- Стоит отметить, что "уйти с ресепшна", очевидно, означает инкрементацию семафора, а "дождаться в очереди" означает ожидание инкрементации семафора ресепшна.
- Менеджер отвечает за отель. Поэтому при остановке процесса он "закрывает ресепшн и забирает отчетную книгу", разлинковывая семафор ресепшна и разделяемую память. Он делает это даже при отключении с клавиатуры, как и обусловлено в условии.
команда для запуска менеджера:
```
gcc manager.c -o manager_out -lrt -lpthread && ./manager_out
```

команда для запуска пользователя:
```
gcc customer.c -o customer_out -lrt -lpthread && ./customer_out
```
